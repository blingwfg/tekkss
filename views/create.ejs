<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
       <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <title>Create</title>

    <style>
    
    </style>
    
</head>
<body>
        <h1 class="text-4xl text-center">Server IP : <%= ip %></h1>

        <div class="max-w-[50%] mx-auto border rounded-lg p-2.5 shadow-md mt-2"  >
                <form action="" >
                <div>
                    <label for="name" class=""></label>Name : <br>
                    <input type="text" id="name" class="border p-2 w-[50%]"><br>
                </div>

                    <label for="file"></label>file : <br>
                    <input type="file" id="gambar" class="border p-1"><br>

                    <button type="submit" id="btn-submit" class="border bg-slate-300 my-2 p-2 rounded-md" >Submit</button>
                </form>
            </div>
    <script>
        
        const name = document.getElementById('name')
        const gambar = document.getElementById('gambar')
        const btn = document.getElementById('btn-submit')

        btn.addEventListener('click', async (e) => {
            e.preventDefault()
            const payload = new FormData()

            if (!name.value || !gambar.value){ 
                // alert('Please Complete Field')
                Swal.fire({
                icon: "warning",
                title: "Oops...",
                text: "Please Complete Field",
                // footer: '<a href="#">Why do I have this issue?</a>'
                });
                return
            }

            console.log(gambar.value)
            payload.append('name', name.value)
            payload.append('gambar', gambar.files[0])

            const res = await fetch('/create-data', {
                method:'POST',
                body: payload
            })

            if(res.status === 201) {
                 await Swal.fire({
                icon: "success",
                title: "Success",
                text: "Please Complete Field",
                });
                document.location.replace('/')
            }
        })
    </script>
</body>
</html>